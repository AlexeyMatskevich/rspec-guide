# RuboCop RSpec Guide configuration
# Requires: gem 'rubocop-rspec-guide'
# Source: https://github.com/rspec-guide/rubocop-rspec-guide
# Self-contained: includes require block for standalone use
#
# Note: v0.4.0+ automatically injects configuration including RSpec Language settings
# Supports let_it_be/let_it_be! from test-prof/rspec-rails out of the box

require:
  - rubocop-rspec-guide

# Requires at least 2 behavioral variations in describe block
# Can be achieved via: 2+ sibling contexts OR it-blocks + context-blocks
# Ensures comprehensive test coverage by mandating multiple test scenarios
RSpecGuide/MinimumBehavioralCoverage:
  Enabled: true

# Enforces ordering so successful scenarios precede edge cases
# Improves test readability by placing primary flows before exceptional cases
RSpecGuide/HappyPathFirst:
  Enabled: true

# Requires contexts to have setup (let/let!/let_it_be/let_it_be!/before)
# Ensures context blocks differentiate themselves through explicit setup
# Note: subject should be defined at describe level, not in contexts
RSpecGuide/ContextSetup:
  Enabled: true

# Identifies duplicate variable definitions across sibling contexts
# ERROR: all contexts duplicate; WARNING: partial duplication
RSpecGuide/DuplicateLetValues:
  Enabled: true
  WarnOnPartialDuplicates: true

# Detects duplicate before hooks across sibling contexts
# ERROR: all contexts duplicate; WARNING: partial duplication
RSpecGuide/DuplicateBeforeHooks:
  Enabled: true
  WarnOnPartialDuplicates: true

# Flags identical examples repeated across all leaf contexts
# Suggests extracting invariant tests to shared examples
RSpecGuide/InvariantExamples:
  Enabled: true
  MinLeafContexts: 3

# FactoryBot: Ensures method calls are wrapped in blocks for dynamic evaluation
# Prevents shared values across instances by enforcing lazy evaluation
# Covers Time.now, SecureRandom.hex, 1.day.from_now, Array.new, etc.
FactoryBotGuide/DynamicAttributeEvaluation:
  Enabled: true
